# 文章管理功能

## 功能概述

本项目已添加完整的文章管理功能，包括：

- 文章列表管理
- 新建文章（支持Markdown编辑）
- 编辑文章
- 删除文章
- 用户权限控制

## 访问路径

### 管理员页面
- 文章管理列表：`/admin/posts`
- 新建文章：`/admin/posts/new`
- 编辑文章：`/admin/posts/edit/[id]`

### 用户权限
- 需要登录才能访问
- 只有 `ADMIN` 或 `SUPER_ADMIN` 角色的用户才能访问管理功能

## 功能特性

### 1. Markdown编辑器
- 支持完整的Markdown语法
- 实时预览功能
- 工具栏快捷按钮
- 键盘快捷键支持
- 字数统计

### 2. 文章管理
- 文章基本信息编辑（标题、摘要、分类）
- SEO设置（Meta标题、描述、关键词）
- 发布状态控制
- 自动生成slug
- 阅读时间计算

### 3. 分类管理
- 支持文章分类
- 分类颜色和图标显示
- 分类统计

### 4. 权限控制
- 中间件保护管理员路由
- 用户角色验证
- 登录状态检查

## 使用说明

### 1. 登录系统
首先需要登录系统，只有管理员用户才能访问文章管理功能。

### 2. 访问文章管理
登录后，点击右上角用户头像，在下拉菜单中选择"文章管理"。

### 3. 新建文章
1. 点击"新建文章"按钮
2. 填写文章基本信息：
   - 标题（必填）
   - 分类（可选）
   - 摘要（可选，会自动生成）
   - 发布状态
3. 使用Markdown编辑器编写内容
4. 设置SEO信息
5. 点击"保存"按钮

### 4. 编辑文章
1. 在文章列表中找到要编辑的文章
2. 点击编辑图标
3. 修改文章内容
4. 保存更改

### 5. 删除文章
1. 在编辑页面点击"删除"按钮
2. 确认删除操作
3. 文章将被软删除（不会真正从数据库中删除）

## Markdown编辑器功能

### 工具栏按钮
- **粗体**：`Ctrl+B` 或点击工具栏按钮
- **斜体**：`Ctrl+I` 或点击工具栏按钮
- **链接**：`Ctrl+K` 或点击工具栏按钮
- **无序列表**：点击工具栏按钮
- **有序列表**：点击工具栏按钮
- **引用**：点击工具栏按钮
- **代码块**：点击工具栏按钮
- **图片**：点击工具栏按钮

### 预览功能
- 点击"预览"按钮可以实时查看Markdown渲染效果
- 支持完整的Markdown语法，包括表格、任务列表等

## API接口

### 文章相关API
- `POST /api/admin/posts` - 创建新文章
- `GET /api/admin/posts` - 获取文章列表（管理员用）
- `GET /api/admin/posts/[id]` - 获取单个文章
- `PUT /api/admin/posts/[id]` - 更新文章
- `DELETE /api/admin/posts/[id]` - 删除文章

### 分类相关API
- `GET /api/categories` - 获取所有分类

## 数据库结构

文章表包含以下主要字段：
- `title` - 文章标题
- `slug` - URL友好的标题
- `excerpt` - 文章摘要
- `content` - Markdown内容
- `htmlContent` - 渲染后的HTML内容
- `isPublished` - 发布状态
- `publishedAt` - 发布时间
- `readingTime` - 阅读时间
- `categoryId` - 分类ID
- `authorId` - 作者ID
- SEO相关字段

## 注意事项

1. **权限控制**：确保只有管理员用户才能访问管理功能
2. **内容安全**：Markdown内容会直接渲染，注意XSS防护
3. **文件上传**：目前不支持图片上传，需要手动添加图片URL
4. **备份**：建议定期备份数据库
5. **性能**：大量文章时注意分页和缓存优化

## 扩展功能

可以考虑添加的功能：
- 标签管理
- 图片上传
- 草稿保存
- 版本历史
- 批量操作
- 文章模板
- 自动保存
- 富文本编辑器选项 